<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        let arr = []
        let arr1 = [{
            a: 1,
            b: 2,
            c: 3,
            name: "kk产品部",
            belong: "kk产品部"
        }, {
            a: 11,
            b: 22,
            c: 33,
            name: "kk部门",
            belong: "kk产品部"
        }, {
            a: 111,
            b: 222,
            c: 333,
            name: "jj产品部",
            belong: "jj产品部"
        }, {
            a: 1111,
            b: 2222,
            c: 3333,
            name: "jj部门",
            belong: "jj产品部"
        }, {
            a: 11111,
            b: 22222,
            c: 33333,
            name: "ll产品部",
            belong: "ll产品部"
        }]

        for (let item of arr1) {
            //当name为产品部时，对应item所有属性添加到arrItem里
            if (item.name.indexOf("产品部") > -1) {
                console.log(item)
                let arrItem = {}
                for (let key in item) {
                    arrItem[key] = item[key]
                    // 增加children内层结构
                    arrItem.children = []
                }

                // arr1遍历，如果跟当前item的belong相同，且name不同，则说明是属于同一个belong，作为children添加到arrItem
                for (let obj of arr1) {
                    if (obj.belong === item.belong && obj.name !== item.belong) {
                        let children = {}
                        for (let key in obj) {
                            children[key] = obj[key]
                        }
                        arrItem.children.push(children)
                    }
                }

                // 如果children为空时有影响，删除该属性
                // if (arrItem.children.length === 0) {
                //     delete arrItem.children
                // }
                arr.push(arrItem)
            }
        }

        console.log(arr)
    </script>
</body>

</html>